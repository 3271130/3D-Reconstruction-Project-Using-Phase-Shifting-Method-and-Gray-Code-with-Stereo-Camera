# 背景
在三维重建技术中，使用结构光的方法能够高效且精确地获取物体的三维形态信息。随着工业自动化和计算机视觉的快速发展，三维重建技术在众多领域中得到了广泛的应用，如工业检测、医学成像和虚拟现实等。本次实验旨在利用相位移方法和格雷码编码，结合极线矫正技术，实现对物体的三维重建。通过此实验，我们将深入理解结构光法的基本原理、条纹相移的计算方法及其在三维测量中的应用。
# 原理
本实验采用结构光法来完成三维重建，其基本原理是通过向物体表面投射结构光图案，利用图案的变形信息来提取物体的三维结构。实验中，使用相位移技术与格雷码编码相结合，通过解码条纹图像的相位信息并进行相位展开，最终恢复物体的三维坐标。以下是实验中的关键步骤和理论!
## 结构光三维成像原理
结构光法的基本步骤是将编码的结构光图案投射到被测物体表面，因物体表面具有三维形态，投射到物体表面的图案会发生变形。通过摄像头采集变形的结构光图像，然后通过相位提取和解码算法计算物体的三维形态。
## 相移法
相位移方法是本实验的核心方法之一，通过投射一系列相移后的条纹图案来进行相位的提取。常见的四步相移法中，每一步投射相位彼此相差 90∘ 的条纹图案，生成不同的条纹图像。通过这几幅相移图像，可以计算出每个像素的相位值。
本代码使用十二步相移法。
## 格雷码编码
格雷码编码的特点是它的码距为1，相邻的码值之间只有一位不同，这使得在采集图像时具有较强的抗干扰能力。在三维重建中，格雷码用于对物体的图像进行区域划分，并将不同的区域标记为不同的编码值。在本实验中，格雷码与相移条纹结合，将图像分割为多个子区域，再利用相位展开技术计算绝对相位。
## 相位展开
由于相移方法得到的是折叠相位，取值范围在 [−π,π]，因此需要进行相位展开，将折叠相位转化为连续的绝对相位。相位展开的目标是消除相位跳跃，通过结合格雷码解码得到的粗略区域信息，进一步获取每个像素的绝对相位。绝对相位的计算公式为：
## 极线矫正与三维重建
极线矫正是立体匹配中的重要步骤，目的是将两幅图像的极线调整为水平且平行的状态，以减少立体匹配时的计算复杂度。通过使用相机的内外参信息，进行极线矫正后，立体匹配的搜索空间由二维平面简化为一维线。最终，使用相位差和系统标定得到的相机参数，我们可以计算出物体表面的三维坐标，根据三维坐标生成三维点云实现重建。
